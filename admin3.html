<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>لوحة تحكم - متجر الثقة</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* =========================================
           1. USER PROVIDED CSS (FIXED & COMPLETE)
           ========================================= */
        /* ======== CSS Variables ======== */
        :root {
            /* Light Mode Colors */
            --primary-color: #ff6a00;
            --secondary-color: #f5f5f5;
            --text-dark: #333;
            --text-light: #666;
            --text-gray: #666666;
            --border-color: #e6e7eb;
            --white: #ffffff;
            --bg-gray: #f2f3f7;
            --orange-light: #ff8534;
            --dark-bg: #333;
            --light-orange: #ffeadd;
            --white-orange: #fff5eb;
            --dark-gray: #777;
            --black-overlay: rgba(0, 0, 0, 0.6);
            --white-opacity: rgba(255, 255, 255, 0.5);
            --black-semi: rgba(0, 0, 0, 0.5);
            --black-dark: rgba(0, 0, 0, 0.8);
            --shadow-light: rgba(0,0,0,0.05);
            --shadow-medium: rgba(0,0,0,0.1);
            --shadow-dark: rgba(0,0,0,0.3);
            --shadow-box: rgba(0, 0, 0, 0.08);
            --shadow-modal: rgba(0,0,0,0.3);
            --shadow-hover: rgba(0,0,0,0.1);
            --success-color: #28a745;
            --info-color: #17a2b8;
            --warning-color: #ffc107;
            --danger-color: #dc3545;
        }

        /* Dark Mode Colors */
        body.dark-mode {
            --primary-color: #df7833;
            --secondary-color: #2a2a2a;
            --text-dark: #e0e0e0;
            --text-light: #b0b0b0;
            --text-gray: #a0a0a0;
            --border-color: #444;
            --white: #1a1a1a;
            --bg-gray: #121212;
            --orange-light: #ff9e5c;
            --dark-bg: #000;
            --light-orange: #332a23;
            --white-orange: #2b231d;
            --dark-gray: #999;
            --black-overlay: rgba(255, 255, 255, 0.1);
            --white-opacity: rgba(255, 255, 255, 0.1);
            --black-semi: rgba(255, 255, 255, 0.2);
            --black-dark: rgba(255, 255, 255, 0.05);
            --shadow-light: rgba(255,255,255,0.05);
            --shadow-medium: rgba(255,255,255,0.1);
            --shadow-dark: rgba(255,255,255,0.2);
            --shadow-box: rgba(255,255,255,0.05);
            --shadow-modal: rgba(0,0,0,0.7);
            --shadow-hover: rgba(255,255,255,0.15);
        }

        /* ======== Base Styles ======== */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: "Roboto", sans-serif;
            background-color: var(--bg-gray);
            color: var(--text-dark);
            direction: rtl;
            transition: background-color 0.3s, color 0.3s;
        }

        a { text-decoration: none; color: inherit; }
        ul { list-style: none; }
        .container { max-width: 1200px; margin: 0 auto; padding: 0 15px; }

        /* ======== Header Styles (Reuse parts) ======== */
        .top-header2 {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--orange-light) 100%);
            color: var(--white);
            padding: 15px 0;
            margin-bottom: 20px;
        }
        .header-top2 { display: flex; justify-content: space-between; align-items: center; }
        .logo2 p { font-size: 24px; font-weight: 900; color: var(--white); margin: 0; }
        .logo2 { display: flex; align-items: center; gap: 10px; }

        /* ======== Products Grid (Reused) ======== */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(170px, 1fr));
            gap: 10px;
            padding: 10px 0;
        }

        .product-card {
            background-color: var(--white);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 10px;
            transition: box-shadow 0.3s ease;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .product-card:hover {
            box-shadow: 0 4px 12px var(--shadow-hover);
            border-color: var(--orange-light);
        }

        .image-container {
            width: 100%;
            height: 150px; /* Reduced for Admin compact view */
            margin-bottom: 10px;
            border-radius: 8px;
            overflow: hidden;
            background-color: var(--border-color);
            position: relative;
        }

        .image-container img { width: 100%; height: 100%; object-fit: cover; }

        .product-title {
            font-size: 14px;
            color: var(--text-dark);
            font-weight: 600;
            margin-bottom: 5px;
            height: 40px;
            overflow: hidden;
        }
        
        .product-price { font-size: 15px; font-weight: 700; color: var(--primary-color); }

        /* Badge Status (Reused) */
        .badge-status7 {
            position: absolute; top: 5px; left: 5px; color: #fff; font-size: 10px;
            padding: 2px 5px; border-radius: 10px; opacity: 0.9; z-index: 2;
        }
        .badge-status7.offer7 { background-color: #cd0b22; }
        .badge-status7.new-product7 { background: #a77814; }

        /* Completing the broken CSS from prompt */
        .videos-nav-btn {
            background: var(--black-semi);
            color: #fff;
            border: none;
            width: 33px;
            height: 33px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center; /* Added to center icon */
            cursor: pointer;
        }

        /* =========================================
           2. ADMIN DASHBOARD SPECIFIC STYLES
           ========================================= */
        
        /* Layout Grid for Admin Sections */
        .admin-section {
            background: var(--white);
            border-radius: 10px;
            box-shadow: 0 2px 10px var(--shadow-light);
            padding: 20px;
            margin-bottom: 30px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            border-bottom: 2px solid var(--bg-gray);
            padding-bottom: 10px;
        }

        .section-title {
            font-size: 20px;
            font-weight: 800;
            color: var(--primary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .split-container {
            display: grid;
            grid-template-columns: 1fr 1fr; /* Split 50/50 */
            gap: 20px;
        }

        @media (max-width: 900px) {
            .split-container { grid-template-columns: 1fr; }
        }

        .panel-container {
            background: var(--bg-gray);
            border-radius: 8px;
            padding: 15px;
            border: 1px solid var(--border-color);
        }

        .panel-header {
            font-weight: 700;
            margin-bottom: 15px;
            color: var(--text-dark);
            display: flex;
            justify-content: space-between;
        }

        /* Buttons & Actions */
        .btn-action {
            width: 100%;
            padding: 8px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: bold;
            margin-top: 5px;
            transition: 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .btn-import { background: var(--success-color); color: #fff; }
        .btn-delete { background: var(--danger-color); color: #fff; }
        .btn-pin { background: var(--info-color); color: #fff; }
        .btn-hide { background: var(--text-gray); color: #fff; }
        .btn-label { background: var(--warning-color); color: #333; }
        .btn-video { background: #cc0000; color: #fff; } /* Youtube red */

        .store-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 5px;
            margin-top: 10px;
        }
        .full-width { grid-column: span 2; }

        /* Order Cards */
        .order-card {
            background: var(--white);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
            border-right: 4px solid var(--primary-color);
            box-shadow: 0 2px 4px var(--shadow-light);
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .order-header {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
            font-size: 14px;
        }

        .order-status {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 12px;
            background: var(--bg-gray);
            color: var(--text-gray);
        }

        .status-sold { background: var(--success-color); color: #fff; }
        .status-pending { background: var(--warning-color); color: #333; }

        /* Ideas Grid */
        .ideas-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 15px;
        }

        .idea-card {
            background: var(--light-orange);
            padding: 20px;
            border-radius: 8px;
            position: relative;
            color: var(--primary-color);
        }
        
        .idea-actions {
            margin-top: 15px;
            display: flex;
            gap: 10px;
        }

        /* Modal Custom Styles */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--black-dark);
            z-index: 9999;
            display: none;
            justify-content: center;
            align-items: center;
        }
        
        .modal-overlay.active { display: flex; }

        .modal-box {
            background: var(--white);
            width: 90%;
            max-width: 500px;
            border-radius: 10px;
            padding: 25px;
            position: relative;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-close-btn {
            position: absolute;
            top: 15px;
            left: 15px;
            font-size: 20px;
            cursor: pointer;
            color: var(--text-gray);
        }

        .modal-details p {
            margin-bottom: 10px;
            font-size: 14px;
            border-bottom: 1px dashed var(--border-color);
            padding-bottom: 5px;
        }

        .modal-details strong { color: var(--primary-color); }

        .modal-actions {
            margin-top: 20px;
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        /* Input inside product card for video */
        .video-input-group {
            display: none; /* Hidden by default */
            margin-top: 5px;
            grid-column: span 2;
        }
        .video-input-group.active { display: block; }
        .video-input {
            width: 100%;
            padding: 5px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-size: 11px;
        }
    </style>
</head>
<body>

    <header class="top-header2">
        <div class="container header-top2">
            <div class="logo2">
                <i class="fas fa-shield-alt fa-2x"></i>
                <p>متجر الثقة - لوحة الإدارة</p>
            </div>
            <div class="header-icons2">
                <a href="#"><i class="fas fa-user-circle"></i></a>
                <a href="#"><i class="fas fa-bell"></i></a>
                <a href="#" onclick="alert('تسجيل خروج')"><i class="fas fa-sign-out-alt"></i></a>
            </div>
        </div>
    </header>

    <div class="container">

        <section class="admin-section" id="product-section">
            <div class="section-header">
                <div class="section-title"><i class="fas fa-box-open"></i> إدارة المنتجات</div>
            </div>
            <div class="split-container">
                
                <div class="panel-container">
                    <div class="panel-header">
                        <span><i class="fas fa-archive"></i> أرشيف المنتجات</span>
                    </div>
                    <div class="products-grid" id="archive-grid">
                        </div>
                </div>

                <div class="panel-container">
                    <div class="panel-header">
                        <span><i class="fas fa-store"></i> منتجات المتجر الحالية</span>
                    </div>
                    <div class="products-grid" id="store-grid">
                        </div>
                </div>

            </div>
        </section>

        <section class="admin-section" id="order-section">
            <div class="section-header">
                <div class="section-title"><i class="fas fa-shopping-cart"></i> إدارة الطلبات</div>
            </div>
            <div class="split-container">
                
                <div class="panel-container">
                    <div class="panel-header">
                        <span><i class="fas fa-file-invoice-dollar"></i> طلبات الشراء</span>
                    </div>
                    <div id="orders-list">
                        </div>
                </div>

                <div class="panel-container">
                    <div class="panel-header">
                        <span><i class="fas fa-comments"></i> عروض السعر والاستشارات</span>
                    </div>
                    <div id="quotes-list">
                        </div>
                </div>

            </div>
        </section>

        <section class="admin-section" id="ideas-section">
            <div class="section-header">
                <div class="section-title"><i class="fas fa-lightbulb"></i> إدارة أفكار المشاريع</div>
                <button class="btn-action btn-import" style="width: auto; padding: 5px 15px;" onclick="alert('خاصية إضافة فكرة جديدة')">
                    <i class="fas fa-plus"></i> إضافة فكرة
                </button>
            </div>
            <div class="ideas-grid" id="ideas-grid">
                </div>
        </section>

    </div>

    <div class="modal-overlay" id="generic-modal">
        <div class="modal-box">
            <span class="modal-close-btn" onclick="closeModal()">&times;</span>
            <h3 id="modal-title" style="margin-bottom: 20px; color: var(--primary-color);">عنوان النافذة</h3>
            <div class="modal-details" id="modal-content">
                </div>
            <div class="modal-actions" id="modal-actions">
                </div>
        </div>
    </div>

    <script>
        /* =========================================
           DUMMY DATA & STATE
           ========================================= */
        
        // 1. Archive Products
        let archiveProducts = [
            { id: 101, name: "سماعات بلوتوث احترافية", price: "150 ر.س", img: "https://via.placeholder.com/200/333/fff?text=Headset" },
            { id: 102, name: "ماوس جيمنج RGB", price: "90 ر.س", img: "https://via.placeholder.com/200/333/fff?text=Mouse" },
            { id: 103, name: "كيبورد ميكانيكي", price: "300 ر.س", img: "https://via.placeholder.com/200/333/fff?text=Keyboard" },
        ];

        // 2. Store Products (Active)
        let storeProducts = [
            { id: 201, name: "لابتوب أعمال ديل", price: "3500 ر.س", img: "https://via.placeholder.com/200/ff6a00/fff?text=Laptop", pinned: false, hidden: false, label: "" },
            { id: 202, name: "كاميرا مراقبة ذكية", price: "200 ر.س", img: "https://via.placeholder.com/200/ff6a00/fff?text=Camera", pinned: true, hidden: false, label: "وصل حديثاً" },
        ];

        // 3. Purchase Orders
        let purchaseOrders = [
            { id: 501, client: "أحمد محمد", sku: "PROD-201", email: "ahmed@mail.com", phone: "0555555555", status: "تم البيع", payment: "فيزا", desc: "أريد نسخة ويندوز مثبتة" },
            { id: 502, client: "سارة علي", sku: "PROD-202", email: "sara@mail.com", phone: "0544444444", status: "طلب معلق", payment: "تحويل بنكي", desc: "بدون ملاحظات" },
        ];

        // 4. Quotes / Consultations
        let quotesRequests = [
            { id: 601, client: "شركة التقنية الحديثة", title: "طلب عرض سعر 50 جهاز", date: "2023-10-01 10:00AM", status: "طلب معلق", details: "نحتاج أجهزة لابتوب للموظفين بمواصفات متوسطة." },
            { id: 602, client: "خالد يوسف", title: "استشارة بخصوص سيرفرات", date: "2023-10-02 02:30PM", status: "تم الرد", details: "ما هو السيرفر المناسب لشركة صغيرة؟" },
        ];

        // 5. Project Ideas
        let projectIdeas = [
            { id: 701, title: "متجر أدوات قهوة مختصة", desc: "فكرة لبيع أدوات ومحاصيل القهوة مع اشتراكات شهرية." },
            { id: 702, title: "خدمة صيانة منزلية", desc: "تطبيق لربط الفنيين بالعملاء بشكل مباشر." },
        ];

        /* =========================================
           RENDER FUNCTIONS
           ========================================= */

        // Init
        window.onload = function() {
            renderArchive();
            renderStore();
            renderOrders();
            renderQuotes();
            renderIdeas();
        };

        // Render Archive
        function renderArchive() {
            const container = document.getElementById('archive-grid');
            container.innerHTML = '';
            archiveProducts.forEach(prod => {
                container.innerHTML += `
                    <div class="product-card">
                        <div class="image-container"><img src="${prod.img}" alt="${prod.name}"></div>
                        <h4 class="product-title">${prod.name}</h4>
                        <div class="product-price">${prod.price}</div>
                        <button class="btn-action btn-import" onclick="importToStore(${prod.id})">
                            <i class="fas fa-file-import"></i> استيراد للمتجر
                        </button>
                    </div>
                `;
            });
        }

        // Render Store Products
        function renderStore() {
            const container = document.getElementById('store-grid');
            container.innerHTML = '';
            storeProducts.forEach(prod => {
                const pinText = prod.pinned ? "إلغاء التثبيت" : "تثبيت بالرئيسية";
                const hideText = prod.hidden ? "إلغاء الإخفاء" : "إخفاء المنتج";
                const opacity = prod.hidden ? "0.5" : "1";
                const badge = prod.label ? `<span class="badge-status7 new-product7">${prod.label}</span>` : '';

                container.innerHTML += `
                    <div class="product-card" style="opacity: ${opacity}">
                        ${badge}
                        <div class="image-container"><img src="${prod.img}" alt="${prod.name}"></div>
                        <h4 class="product-title">${prod.name}</h4>
                        <div class="product-price">${prod.price}</div>
                        
                        <div class="store-actions">
                            <button class="btn-action btn-delete full-width" onclick="deleteProduct(${prod.id})">
                                <i class="fas fa-trash"></i> حذف المنتج
                            </button>
                            <button class="btn-action btn-pin" onclick="togglePin(${prod.id})">
                                <i class="fas fa-thumbtack"></i> ${pinText}
                            </button>
                            <button class="btn-action btn-hide" onclick="toggleHide(${prod.id})">
                                <i class="fas fa-eye-slash"></i> ${hideText}
                            </button>
                            <button class="btn-action btn-label" onclick="changeLabel(${prod.id})">
                                <i class="fas fa-tag"></i> ملصق
                            </button>
                            <button class="btn-action btn-video" onclick="toggleVideoInput(this)">
                                <i class="fab fa-youtube"></i> فيديو
                            </button>
                            <div class="video-input-group">
                                <input type="text" class="video-input" placeholder="لصق رابط Embed هنا..." onblur="saveVideoLink(this)">
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        // Render Orders
        function renderOrders() {
            const container = document.getElementById('orders-list');
            container.innerHTML = '';
            purchaseOrders.forEach(order => {
                const statusClass = order.status === "تم البيع" ? "status-sold" : "status-pending";
                container.innerHTML += `
                    <div class="order-card">
                        <div class="order-header">
                            <span><i class="fas fa-user"></i> ${order.client}</span>
                            <span class="sku-code">SKU: ${order.sku}</span>
                        </div>
                        <div style="display:flex; justify-content:space-between; align-items:center;">
                            <button class="btn-action btn-import" style="width:auto; margin:0;" onclick="alert('معاينة المنتج: ${order.sku}')">معاينة المنتج</button>
                            <button class="btn-action btn-pin" style="width:auto; margin:0;" onclick="openOrderModal(${order.id})">تفاصيل الطلب</button>
                        </div>
                    </div>
                `;
            });
        }

        // Render Quotes
        function renderQuotes() {
            const container = document.getElementById('quotes-list');
            container.innerHTML = '';
            quotesRequests.forEach(quote => {
                const statusClass = quote.status === "تم الرد" ? "status-sold" : "status-pending";
                container.innerHTML += `
                    <div class="order-card" style="border-right-color: var(--orange-light);">
                        <div class="order-header">
                            <span>${quote.title}</span>
                        </div>
                        <div style="font-size:12px; color:var(--text-gray); display:flex; justify-content:space-between; margin-top:5px;">
                            <span><i class="far fa-clock"></i> ${quote.date}</span>
                            <span class="order-status ${statusClass}">${quote.status}</span>
                        </div>
                         <div style="margin-top:5px;">
                            <small><i class="fas fa-user-tag"></i> ${quote.client}</small>
                        </div>
                        <button class="btn-action btn-pin full-width" onclick="openQuoteModal(${quote.id})">معاينة</button>
                    </div>
                `;
            });
        }

        // Render Ideas
        function renderIdeas() {
            const container = document.getElementById('ideas-grid');
            container.innerHTML = '';
            projectIdeas.forEach(idea => {
                container.innerHTML += `
                    <div class="idea-card">
                        <h3 style="margin-bottom:10px; color:var(--text-dark);">${idea.title}</h3>
                        <p style="font-size:14px; color:var(--text-gray); line-height:1.5;">${idea.desc}</p>
                        <div class="idea-actions">
                            <button class="btn-action btn-pin" onclick="alert('تعديل الفكرة: ${idea.title}')">تعديل</button>
                            <button class="btn-action btn-delete" onclick="deleteIdea(${idea.id})">حذف</button>
                        </div>
                    </div>
                `;
            });
        }

        /* =========================================
           ACTION HANDLERS
           ========================================= */

        // 1. Product Actions
        function importToStore(id) {
            const product = archiveProducts.find(p => p.id === id);
            // Add to store with default props
            storeProducts.push({ ...product, pinned: false, hidden: false, label: "" });
            // Remove from archive
            archiveProducts = archiveProducts.filter(p => p.id !== id);
            
            renderArchive();
            renderStore();
            alert(`تم استيراد "${product.name}" إلى المتجر بنجاح.`);
        }

        function deleteProduct(id) {
            if (confirm("سيتم حذف المنتج من كل المتجر.. هل تؤكد ذلك؟")) {
                storeProducts = storeProducts.filter(p => p.id !== id);
                renderStore();
            }
        }

        function togglePin(id) {
            const product = storeProducts.find(p => p.id === id);
            product.pinned = !product.pinned;
            renderStore();
        }

        function toggleHide(id) {
            const product = storeProducts.find(p => p.id === id);
            product.hidden = !product.hidden;
            renderStore();
        }

        function changeLabel(id) {
            const labels = ["وصل حديثاً", "عرض خاص", "سعر جديد", "تخفيض", ""];
            const choice = prompt("اختر رقم الملصق:\n1. وصل حديثاً\n2. عرض خاص\n3. سعر جديد\n4. تخفيض\n5. إزالة الملصق");
            const product = storeProducts.find(p => p.id === id);
            
            if(choice >= 1 && choice <= 4) {
                product.label = labels[choice - 1];
            } else if (choice == 5) {
                product.label = "";
            }
            renderStore();
        }

        function toggleVideoInput(btn) {
            const inputGroup = btn.nextElementSibling;
            inputGroup.classList.toggle('active');
        }

        function saveVideoLink(input) {
            if(input.value) {
                alert("تم حفظ رابط الفيديو: " + input.value);
                input.parentElement.classList.remove('active');
            }
        }

        // 2. Modals (Order & Quote)
        const modal = document.getElementById('generic-modal');
        const modalTitle = document.getElementById('modal-title');
        const modalContent = document.getElementById('modal-content');
        const modalActions = document.getElementById('modal-actions');

        function openOrderModal(id) {
            const order = purchaseOrders.find(o => o.id === id);
            modalTitle.innerText = "تفاصيل الطلب";
            modalContent.innerHTML = `
                <p><strong>حالة الطلب:</strong> ${order.status}</p>
                <p><strong>اسم العميل:</strong> ${order.client}</p>
                <p><strong>البريد:</strong> ${order.email}</p>
                <p><strong>الهاتف:</strong> ${order.phone}</p>
                <p><strong>الرقم التسلسلي:</strong> ${order.sku}</p>
                <p><strong>وسيلة الدفع:</strong> ${order.payment}</p>
                <p><strong>نص الطلب:</strong> ${order.desc}</p>
            `;
            modalActions.innerHTML = `
                <button class="btn-action btn-import" onclick="alert('تم تأكيد الصفقة'); closeModal()">تأكيد الصفقة</button>
                <button class="btn-action btn-pin" onclick="alert('فتح نافذة الرد');">الرد على الطلب</button>
                <button class="btn-action btn-delete" onclick="alert('تم حذف الطلب'); closeModal()">حذف الطلب</button>
            `;
            modal.classList.add('active');
        }

        function openQuoteModal(id) {
            const quote = quotesRequests.find(q => q.id === id);
            modalTitle.innerText = quote.title;
            modalContent.innerHTML = `
                <p><strong>الحالة:</strong> ${quote.status}</p>
                <p><strong>مقدم الطلب:</strong> ${quote.client}</p>
                <p><strong>التاريخ:</strong> ${quote.date}</p>
                <p><strong>تفاصيل الاستشارة/العرض:</strong> <br> ${quote.details}</p>
            `;
            modalActions.innerHTML = `
                <button class="btn-action btn-pin" onclick="alert('فتح نافذة الرد');">الرد على الطلب</button>
                <button class="btn-action btn-delete" onclick="alert('تم حذف الطلب'); closeModal()">حذف الطلب</button>
            `;
            modal.classList.add('active');
        }

        function closeModal() {
            modal.classList.remove('active');
        }

        // Close modal when clicking outside box
        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeModal();
        });

        // 3. Ideas Actions
        function deleteIdea(id) {
            if(confirm("هل أنت متأكد من حذف الفكرة؟")) {
                projectIdeas = projectIdeas.filter(i => i.id !== id);
                renderIdeas();
            }
        }

    </script>
</body>
</html>